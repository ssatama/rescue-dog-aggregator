@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Updated warm color scheme */
    --background: 31 100% 98%; /* #FDFBF7 warm off-white */
    --foreground: 222.2 84% 4.9%;
    --card: 31 100% 99%; /* Slightly warmer card background */
    --card-foreground: 222.2 84% 4.9%;
    --popover: 31 100% 99%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221 83% 53%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
    
    /* Blue-tinted shadows for premium feel */
    --shadow-blue-xs: 0 1px 2px rgba(59, 130, 246, 0.05);
    --shadow-blue-sm: 0 1px 3px rgba(59, 130, 246, 0.1), 0 1px 2px rgba(59, 130, 246, 0.06);
    --shadow-blue-md: 0 4px 6px rgba(59, 130, 246, 0.07), 0 2px 4px rgba(59, 130, 246, 0.06);
    --shadow-blue-lg: 0 10px 15px rgba(59, 130, 246, 0.1), 0 4px 6px rgba(59, 130, 246, 0.05);
    --shadow-blue-xl: 0 20px 25px rgba(59, 130, 246, 0.1), 0 10px 10px rgba(59, 130, 246, 0.04);
    --shadow-blue-2xl: 0 25px 50px rgba(59, 130, 246, 0.15);
    
    /* Animation duration and timing custom properties */
    --animation-duration-fast: 150ms;
    --animation-duration-normal: 300ms;
    --animation-duration-slow: 500ms;
    --animation-duration-slower: 700ms;
    --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
    --animation-easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --animation-easing-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    
    /* Stagger animation delays */
    --stagger-delay-1: 50ms;
    --stagger-delay-2: 100ms;
    --stagger-delay-3: 150ms;
    --stagger-delay-4: 200ms;
    --stagger-delay-5: 250ms;
    --stagger-delay-6: 300ms;
    
    /* Typography Scale - Responsive with clamp() */
    --font-size-hero: clamp(2.25rem, 4vw + 1rem, 3.75rem); /* 36px-60px */
    --font-size-title: clamp(2rem, 3vw + 1rem, 3rem);      /* 32px-48px */
    --font-size-section: clamp(1.5rem, 2.5vw + 0.5rem, 2rem); /* 24px-32px */
    --font-size-card: 1.25rem;                             /* 20px */
    --font-size-body: 1rem;                                /* 16px */
    --font-size-small: 0.875rem;                           /* 14px */
    --font-size-tiny: 0.75rem;                             /* 12px */
    
    /* Line Heights */
    --line-height-tight: 1.1;
    --line-height-snug: 1.2;
    --line-height-compact: 1.3;
    --line-height-relaxed: 1.5;
    --line-height-loose: 1.6;
    
    /* Letter Spacing */
    --letter-spacing-tight: -0.02em;
    --letter-spacing-normal: 0;
    --letter-spacing-wide: 0.01em;
    
    /* Font Weights */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;
  }
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
    
    /* Dark mode shadows with purple tint */
    --shadow-blue-xs: 0 1px 2px rgba(147, 51, 234, 0.1);
    --shadow-blue-sm: 0 1px 3px rgba(147, 51, 234, 0.15), 0 1px 2px rgba(147, 51, 234, 0.1);
    --shadow-blue-md: 0 4px 6px rgba(147, 51, 234, 0.12), 0 2px 4px rgba(147, 51, 234, 0.1);
    --shadow-blue-lg: 0 10px 15px rgba(147, 51, 234, 0.15), 0 4px 6px rgba(147, 51, 234, 0.1);
    --shadow-blue-xl: 0 20px 25px rgba(147, 51, 234, 0.15), 0 10px 10px rgba(147, 51, 234, 0.08);
    --shadow-blue-2xl: 0 25px 50px rgba(147, 51, 234, 0.2);
    
    /* Typography and animation variables remain the same in dark mode */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* Enhanced shimmer animation with blue tint */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      hsl(var(--background)) 0%,
      rgba(59, 130, 246, 0.08) 50%,
      hsl(var(--background)) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite ease-in-out;
  }
  
  /* Enhanced shimmer for warm theme */
  .animate-shimmer-warm {
    background: linear-gradient(
      90deg,
      #fdfbf7 0%,
      rgba(251, 146, 60, 0.1) 50%,
      #fdfbf7 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite ease-in-out;
  }

  /* Dark mode variant for shimmer-warm */
  .dark .animate-shimmer-warm {
    background: linear-gradient(
      90deg,
      rgb(31 41 55) 0%,
      rgba(147, 51, 234, 0.1) 50%,
      rgb(31 41 55) 100%
    );
  }

  /* Session 6: Premium shimmer animation with enhanced orange-tinted effect */
  .animate-shimmer-premium {
    background: linear-gradient(
      90deg,  
      #fdfbf7 0%,
      rgba(251, 146, 60, 0.15) 30%,
      rgba(251, 146, 60, 0.25) 50%, 
      rgba(251, 146, 60, 0.15) 70%,
      #fdfbf7 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.8s infinite ease-in-out;
  }

  /* Dark mode variant for premium shimmer */
  .dark .animate-shimmer-premium {
    background: linear-gradient(
      90deg,  
      rgb(31 41 55) 0%,
      rgba(147, 51, 234, 0.15) 30%,
      rgba(147, 51, 234, 0.25) 50%, 
      rgba(147, 51, 234, 0.15) 70%,
      rgb(31 41 55) 100%
    );
  }

  /* Skeleton element shimmer class for coordinated animation */
  .skeleton {
    background: linear-gradient(
      90deg,
      rgba(229, 231, 235, 1) 0%,
      rgba(251, 146, 60, 0.1) 50%,
      rgba(229, 231, 235, 1) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.8s infinite ease-in-out;
  }

  /* Dark mode variant for skeleton */
  .dark .skeleton {
    background: linear-gradient(
      90deg,
      rgba(55, 65, 81, 1) 0%,
      rgba(147, 51, 234, 0.1) 50%,
      rgba(55, 65, 81, 1) 100%
    );
  }

  /* Enhanced shimmer animation for premium loading skeleton feel */
  @keyframes skeleton-shimmer {
    0% { 
      transform: translateX(-100%); 
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% { 
      transform: translateX(100%); 
      opacity: 0;
    }
  }

  .skeleton-shimmer {
    animation: skeleton-shimmer 2s infinite ease-in-out;
  }

  /* Dot pattern background for Trust Section */
  .bg-dot-pattern {
    background-image: radial-gradient(circle at 1px 1px, rgb(229 231 235 / 0.5) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Hero gradient background - peach/cream tones */
  .hero-gradient {
    background: linear-gradient(135deg, #fef7ed 0%, #fed7aa 30%, #fdba74 60%, #f97316 100%);
    background-size: 400% 400%;
    animation: gradient-shift 20s ease infinite;
  }

  /* Dark mode hero gradient - subtle dark tones matching organization pages */
  .dark .hero-gradient {
    background: linear-gradient(135deg, #1f2937 0%, #374151 50%, #4b5563 100%);
    background-size: 400% 400%;
    animation: gradient-shift 20s ease infinite;
  }


  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Enhanced Map dots pulse animation with staggered timing */
  @keyframes pulse-dot {
    0%, 100% {
      opacity: 0.3;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.4);
    }
  }

  .animate-pulse-dot {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
  }

  /* Staggered map dot animations */
  .animate-pulse-dot-1 {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
    animation-delay: 0s;
  }
  
  .animate-pulse-dot-2 {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
    animation-delay: 0.2s;
  }
  
  .animate-pulse-dot-3 {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
    animation-delay: 0.4s;
  }
  
  .animate-pulse-dot-4 {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
    animation-delay: 0.6s;
  }
  
  .animate-pulse-dot-5 {
    animation: pulse-dot var(--animation-duration-slow) var(--animation-easing) infinite;
    animation-delay: 0.8s;
  }

  /* Counter number animation easing */
  @keyframes count-up {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-count-up {
    animation: count-up 0.5s ease-out;
  }

  /* Mobile carousel styles */
  .mobile-carousel-container {
    width: 100%;
  }

  .dog-carousel {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  .dog-carousel::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  .mobile-swipe {
    scroll-snap-type: x mandatory;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    will-change: transform;
    touch-action: pan-x;
  }

  .mobile-swipe > div > div {
    scroll-snap-align: start;
  }

  /* Backdrop blur utilities for better browser support */
  .backdrop-blur-sm {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  .backdrop-blur {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  /* Enhanced typography with improved contrast and scaling - DARK MODE COMPATIBLE */
  .text-hero {
    font-size: var(--font-size-hero);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
    font-weight: var(--font-weight-extrabold);
    color: hsl(var(--foreground)); /* Use CSS variable for dark mode compatibility */
  }

  .text-section {
    font-size: var(--font-size-section);
    line-height: var(--line-height-snug);
    letter-spacing: var(--letter-spacing-normal);
    font-weight: var(--font-weight-bold);
    color: hsl(var(--foreground)); /* Use CSS variable for dark mode compatibility */
  }

  .text-title {
    font-size: var(--font-size-title);
    line-height: var(--line-height-snug);
    letter-spacing: var(--letter-spacing-tight);
    font-weight: var(--font-weight-bold);
    color: hsl(var(--foreground)); /* Use CSS variable for dark mode compatibility */
  }

  .text-card-title {
    font-size: var(--font-size-card);
    line-height: var(--line-height-compact);
    letter-spacing: var(--letter-spacing-normal);
    font-weight: var(--font-weight-semibold);
    color: hsl(var(--foreground)); /* Use CSS variable for dark mode compatibility */
  }

  .text-body {
    font-size: var(--font-size-body);
    line-height: var(--line-height-relaxed);
    letter-spacing: var(--letter-spacing-normal);
    font-weight: var(--font-weight-normal);
    color: hsl(var(--muted-foreground)); /* Use CSS variable for dark mode compatibility */
  }
  
  /* New utility classes for animations */
  .animate-fade-in {
    animation: fadeIn var(--animation-duration-slow) var(--animation-easing) forwards;
    opacity: 0;
  }
  
  .animate-fade-in-up {
    animation: fadeInUp var(--animation-duration-slow) var(--animation-easing) forwards;
    opacity: 0;
    transform: translateY(20px);
  }
  
  .animate-stagger-1 { animation-delay: var(--stagger-delay-1); }
  .animate-stagger-2 { animation-delay: var(--stagger-delay-2); }
  .animate-stagger-3 { animation-delay: var(--stagger-delay-3); }
  .animate-stagger-4 { animation-delay: var(--stagger-delay-4); }
  .animate-stagger-5 { animation-delay: var(--stagger-delay-5); }
  .animate-stagger-6 { animation-delay: var(--stagger-delay-6); }
  
  /* Keyframes for new animations */
  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Blue-tinted shadow utilities */
  .shadow-blue-sm { box-shadow: var(--shadow-blue-sm); }
  .shadow-blue-md { box-shadow: var(--shadow-blue-md); }
  .shadow-blue-lg { box-shadow: var(--shadow-blue-lg); }
  .shadow-blue-xl { box-shadow: var(--shadow-blue-xl); }
  .shadow-blue-2xl { box-shadow: var(--shadow-blue-2xl); }

  /* Mobile-specific improvements */
  @media (max-width: 768px) {
    .hero-gradient {
      background-size: 300% 300%;
    }
    
    .animate-pulse-dot {
      animation-duration: 2s; /* Faster on mobile for better performance */
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .hero-gradient {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 50%, #e5e7eb 100%);
    }
    
    .animate-pulse-dot {
      animation: none; /* Disable animations for high contrast */
    }
  }

  /* Enhanced reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .hero-gradient {
      animation: none;
      background: #fef7ed; /* Static background */
    }
    
    .animate-pulse-dot {
      animation: none;
      opacity: 0.6;
    }
    
    .animate-shimmer,
    .animate-shimmer-warm,
    .animate-shimmer-premium {
      animation: none;
      background: hsl(var(--background));
    }
    
    .skeleton {
      animation: none;
      background: rgba(229, 231, 235, 1);
    }
    
    .animate-count-up,
    .animate-fade-in,
    .animate-fade-in-up {
      animation: none;
      opacity: 1;
      transform: none;
    }
    
    /* Disable all stagger delays */
    .animate-stagger-1,
    .animate-stagger-2,
    .animate-stagger-3,
    .animate-stagger-4,
    .animate-stagger-5,
    .animate-stagger-6 {
      animation-delay: 0s;
    }
    
    /* Disable Session 8 and Session 3 animations in reduced motion */
    .animate-button-hover:hover,
    .animate-card-hover:hover,
    .animate-org-card:hover {
      transform: none;
      box-shadow: none;
    }
    
    /* Disable image scale animations in reduced motion */
    .group:hover .group-hover\:scale-102,
    .group:hover .group-hover\:scale-105 {
      transform: none;
    }
  }

  /* ==================================================
     SESSION 8 ENHANCED ANIMATIONS
     ================================================== */

  /* Animation Variables */
  :root {
    --animation-fast: 150ms;
    --animation-normal: 200ms;
    --animation-slow: 300ms;
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --scale-hover: 1.02;
    --scale-press: 0.98;
  }

  /* Button Animations */
  .animate-button-hover {
    transition: all var(--animation-normal) var(--ease-smooth);
    will-change: transform, box-shadow;
  }
  
  .animate-button-hover:hover {
    transform: scale(var(--scale-hover));
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
  }
  
  .animate-button-hover:active {
    transform: scale(var(--scale-press));
    transition-duration: var(--animation-fast);
  }

  /* Card Animations - Session 3 Enhanced */
  .animate-card-hover {
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, box-shadow;
  }
  
  .animate-card-hover:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 24px -10px rgba(251, 146, 60, 0.3);
  }

  /* Organization Card Animations */
  .animate-org-card {
    transition: all var(--animation-normal) var(--ease-smooth);
    will-change: transform, box-shadow, border-color;
  }
  
  .animate-org-card:hover {
    transform: translateY(-1px) scale(1.01);
    box-shadow: 0 6px 20px rgba(249, 115, 22, 0.15);
    border-color: #fed7aa;
  }

  /* Page Enter Animation */
  @keyframes page-enter {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-page-enter {
    animation: page-enter var(--animation-slow) var(--ease-smooth);
  }

  /* Focus Ring */
  .focus-ring:focus-visible {
    outline: 2px solid #f97316;
    outline-offset: 2px;
  }

  /* Performance Utilities */
  .will-change-transform {
    will-change: transform;
  }
  
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Custom scale utilities for subtle animations - Session 3 Enhanced */
  .scale-102 {
    transform: scale(1.02);
  }
  
  .scale-105 {
    transform: scale(1.05);
  }
  
  .group:hover .group-hover\:scale-102 {
    transform: scale(1.02);
  }
  
  .group:hover .group-hover\:scale-105 {
    transform: scale(1.05);
  }
  
  /* Session 7: Cross-browser compatibility enhancements */
  
  /* Backdrop filter support with fallbacks */
  @supports (backdrop-filter: blur(12px)) or (-webkit-backdrop-filter: blur(12px)) {
    .backdrop-blur {
      -webkit-backdrop-filter: blur(12px);
      backdrop-filter: blur(12px);
    }
  }
  
  /* Fallback for browsers without backdrop-filter support */
  @supports not (backdrop-filter: blur(12px)) {
    .backdrop-blur {
      background-color: rgba(255, 255, 255, 0.98) !important;
    }
  }
  
  /* Ensure animations respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    .animate-shimmer-premium,
    .animate-pulse,
    .animate-fade-in,
    .animate-button-hover,
    .animate-card-hover {
      animation: none !important;
    }
  }
  
  /* Enhanced form input focus styles with orange theme */
  input:focus,
  textarea:focus,
  select:focus {
    @apply border-orange-300 ring-2 ring-orange-200 outline-none;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
  }

  /* Enhanced placeholder styling */
  input::placeholder,
  textarea::placeholder {
    @apply text-gray-400;
    transition: opacity 200ms ease-out;
  }

  input:focus::placeholder,
  textarea:focus::placeholder {
    @apply text-gray-300;
  }

  /* Enhanced button focus styles */
  .btn-focus-ring:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-2 outline-none;
    transition: box-shadow 200ms ease-out;
  }

  /* Enhanced select focus styles */
  .select-focus:focus {
    @apply border-orange-300 ring-2 ring-orange-200 outline-none;
    transition: all 200ms ease-out;
  }

  /* Enhanced hover feedback for interactive elements */
  .enhanced-hover:hover {
    @apply bg-orange-50 border-orange-300;
    transition: all 200ms ease-out;
    transform: translateY(-1px);
  }

  /* Enhanced input container styling */
  .input-container:focus-within {
    @apply ring-2 ring-orange-200 ring-offset-1;
    transition: box-shadow 200ms ease-out;
  }

  /* Enhanced visual feedback for form elements */
  .form-enhanced {
    transition: all 200ms ease-out;
  }

  .form-enhanced:focus-within {
    @apply shadow-sm ring-1 ring-orange-200;
  }

  /* Enhanced interaction states */
  .interactive-enhanced {
    transition: all 200ms ease-out;
  }

  .interactive-enhanced:hover {
    @apply bg-orange-50/50;
    transform: translateY(-0.5px);
  }

  .interactive-enhanced:active {
    transform: translateY(0);
  }

  /* ==================================================
     FLOATING FILTER PANEL ENHANCED ANIMATIONS
     ================================================== */

  /* Filter section smooth collapse animations */
  .filter-section {
    overflow: hidden;
    transition: height 200ms ease-out;
    will-change: transform;
  }

  .filter-section-content {
    transition: opacity 200ms ease-out, transform 200ms ease-out;
    will-change: transform;
  }

  .filter-section.collapsed .filter-section-content {
    opacity: 0;
    transform: translateY(-10px);
  }

  /* Enhanced chevron icon rotation */
  .chevron-icon {
    transition: transform 200ms ease-out;
  }

  .chevron-icon.chevron-open {
    transform: rotate(180deg);
  }

  /* Section active state indicators */
  .filter-section-active {
    position: relative;
  }

  .filter-section-active::before {
    content: '';
    position: absolute;
    left: -1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 20px;
    background: linear-gradient(to bottom, #f97316, #ea580c);
    border-radius: 2px;
    opacity: 0.8;
  }

  .filter-section-active {
    box-shadow: 0 0 0 1px rgba(249, 115, 22, 0.1), 
                0 0 20px rgba(249, 115, 22, 0.05);
    border-radius: 8px;
  }

  /* Enhanced backdrop blur support with better fallbacks */
  @supports (backdrop-filter: blur(16px)) or (-webkit-backdrop-filter: blur(16px)) {
    .backdrop-blur-md {
      -webkit-backdrop-filter: blur(16px);
      backdrop-filter: blur(16px);
    }
  }

  /* Fallback for browsers without backdrop-filter support */
  @supports not (backdrop-filter: blur(16px)) {
    .backdrop-blur-md {
      background-color: rgba(255, 255, 255, 0.98) !important;
    }
  }

  /* ==================================================
     CROSS-BROWSER COMPATIBILITY ENHANCEMENTS
     ================================================== */

  /* CSS Grid fallbacks for older browsers */
  @supports not (display: grid) {
    .grid {
      display: flex;
      flex-wrap: wrap;
    }
    
    .grid-cols-1 > * { flex: 0 0 100%; }
    .grid-cols-2 > * { flex: 0 0 50%; }
    .grid-cols-3 > * { flex: 0 0 33.333%; }
  }
  
  /* Transform optimizations with vendor prefixes */
  .cross-browser-transform {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000px;
    perspective: 1000px;
  }
  
  /* Gradient fallbacks with vendor prefixes */
  .cross-browser-gradient {
    background: #f97316; /* Fallback for very old browsers */
    background: -webkit-linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    background: -moz-linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    background: -ms-linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    background: -o-linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  }
  
  /* CSS Variables fallbacks for IE11 and older Safari */
  .cross-browser-variables {
    background-color: #ea580c; /* Fallback */
    background-color: var(--custom-color, #ea580c);
  }
  
  /* Flexbox vendor prefixes for IE10+ */
  .cross-browser-flex {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -moz-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -moz-box-pack: justify;
    -ms-flex-pack: justify;
    justify-content: space-between;
  }
  
  /* Animation vendor prefixes */
  @-webkit-keyframes cross-browser-fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @-moz-keyframes cross-browser-fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @-ms-keyframes cross-browser-fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes cross-browser-fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .cross-browser-animation {
    -webkit-animation: cross-browser-fadeIn 0.3s ease-out;
    -moz-animation: cross-browser-fadeIn 0.3s ease-out;
    -ms-animation: cross-browser-fadeIn 0.3s ease-out;
    animation: cross-browser-fadeIn 0.3s ease-out;
  }

  /* Enhanced transition support for all browsers */
  .cross-browser-transition {
    -webkit-transition: all 0.2s ease-out;
    -moz-transition: all 0.2s ease-out;
    -ms-transition: all 0.2s ease-out;
    -o-transition: all 0.2s ease-out;
    transition: all 0.2s ease-out;
  }

  /* Will-change optimization for performance */
  .cross-browser-will-change {
    -webkit-transform: translateZ(0); /* Hardware acceleration */
    transform: translateZ(0);
    will-change: transform, opacity;
  }

  /* Box-shadow with vendor prefixes */
  .cross-browser-shadow {
    -webkit-box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  /* ==================================================
     ENHANCED FOCUS STATES SYSTEM
     ================================================== */

  /* Enhanced focus ring system */
  .enhanced-focus-button:focus-visible {
    @apply ring-4 ring-orange-300 ring-offset-2 outline-none;
    transition: box-shadow 200ms ease-out;
  }

  .enhanced-focus-input:focus {
    @apply border-orange-400 ring-4 ring-orange-200 outline-none;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
  }

  .enhanced-focus-textarea:focus {
    @apply border-orange-400 ring-4 ring-orange-200 outline-none;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
  }

  .enhanced-focus-select:focus {
    @apply border-orange-400 ring-4 ring-orange-200 outline-none;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
  }

  .enhanced-focus-link:focus-visible {
    @apply ring-2 ring-orange-400 ring-offset-1 outline-none rounded-sm;
    transition: box-shadow 200ms ease-out;
  }

  .enhanced-focus-card:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-2 outline-none border-orange-300;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
  }

  /* Skip link enhanced styling */
  .skip-link:focus {
    @apply ring-4 ring-white ring-offset-2 ring-offset-orange-600 outline-none;
    transition: all 200ms ease-out;
  }

  /* Interactive enhanced elements */
  .interactive-enhanced:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-1 outline-none;
    transition: box-shadow 200ms ease-out;
  }

  /* High contrast mode focus states */
  @media (prefers-contrast: high) {
    .enhanced-focus-button:focus-visible,
    .enhanced-focus-input:focus,
    .enhanced-focus-textarea:focus,
    .enhanced-focus-select:focus,
    .enhanced-focus-link:focus-visible,
    .enhanced-focus-card:focus-visible,
    .interactive-enhanced:focus-visible {
      outline: 3px solid currentColor;
      outline-offset: 2px;
    }
  }

  /* Reduced motion support for focus states */
  @media (prefers-reduced-motion: reduce) {
    .enhanced-focus-button:focus-visible,
    .enhanced-focus-input:focus,
    .enhanced-focus-textarea:focus,
    .enhanced-focus-select:focus,
    .enhanced-focus-link:focus-visible,
    .enhanced-focus-card:focus-visible,
    .interactive-enhanced:focus-visible,
    .skip-link:focus {
      transition: none;
    }
  }

  /* Focus management utilities */
  .focus-trap {
    /* Ensure focus stays within container */
    isolation: isolate;
  }

  .focus-trap button:first-child {
    /* First focusable element in trap */
    position: relative;
  }

  .focus-trap button:last-child {
    /* Last focusable element in trap */
    position: relative;
  }

  /* Enhanced keyboard navigation indicators */
  .keyboard-navigation-active *:focus-visible {
    outline: 2px solid #ea580c;
    outline-offset: 2px;
  }

  /* Touch device focus adaptations */
  @media (pointer: coarse) {
    .enhanced-focus-button:focus-visible,
    .enhanced-focus-card:focus-visible,
    .interactive-enhanced:focus-visible {
      /* Larger focus targets for touch devices */
      ring-width: 3px;
      ring-offset-width: 3px;
    }
  }

  /* ==================================================
     MOBILE POLISH & ACCESSIBILITY ENHANCEMENTS
     ================================================== */

  /* Mobile touch targets */
  .mobile-touch-target {
    min-height: 48px;
    min-width: 48px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(234, 88, 12, 0.2);
  }

  /* Enhanced tap areas for better mobile interaction */
  .mobile-enhanced-tap {
    padding: 1rem; /* Equivalent to p-4 */
    min-height: 48px;
    touch-action: manipulation;
    transition: background-color 200ms ease-out;
  }

  /* Mobile responsive text sizing */
  .mobile-responsive-text {
    line-height: 1.5;
    letter-spacing: 0.025em;
  }

  /* Mobile form enhancements */
  .mobile-form-input {
    min-height: 48px;
    font-size: 16px; /* Prevents zoom on iOS */
    border-radius: 0.375rem;
    padding: 0.75rem;
    touch-action: manipulation;
  }

  .mobile-form-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 0.5rem;
    display: block;
  }

  .mobile-form-help {
    font-size: 0.875rem;
    color: #6b7280;
    margin-top: 0.25rem;
  }

  /* Mobile navigation enhancements */
  .mobile-navigation {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  .mobile-nav-link {
    min-height: 48px;
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    touch-action: manipulation;
    transition: background-color 200ms ease-out;
  }

  .mobile-nav-link:hover,
  .mobile-nav-link:focus {
    background-color: rgba(251, 146, 60, 0.1);
    outline: 2px solid #ea580c;
    outline-offset: 2px;
  }

  /* Mobile card optimizations */
  .mobile-card-spacing {
    margin-bottom: 1rem;
    padding: 1.5rem;
    border-radius: 0.5rem;
  }

  .mobile-card-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    line-height: 1.4;
  }

  .mobile-card-content {
    color: #6b7280;
    margin-bottom: 1rem;
    line-height: 1.6;
  }

  .mobile-card-button {
    width: 100%;
    min-height: 48px;
    font-weight: 500;
    border-radius: 0.375rem;
    touch-action: manipulation;
    transition: all 200ms ease-out;
  }

  /* High contrast mode support */
  .high-contrast-support {
    border: 1px solid #d1d5db;
    padding: 1rem;
    border-radius: 0.5rem;
  }

  @media (prefers-contrast: high) {
    .high-contrast-support {
      border: 2px solid currentColor;
      background-color: transparent;
    }

    .mobile-touch-target,
    .mobile-enhanced-tap,
    .mobile-card-button {
      border: 2px solid currentColor;
    }
  }

  /* Reduced motion friendly animations */
  .reduced-motion-friendly {
    transition: transform 300ms ease-out;
  }

  @media (prefers-reduced-motion: reduce) {
    .reduced-motion-friendly {
      transition: none;
    }

    .reduced-motion-friendly:hover {
      transform: none;
    }
  }

  /* Mobile viewport optimizations */
  @media (max-width: 768px) {
    /* Larger touch targets on mobile */
    .mobile-touch-target,
    .mobile-enhanced-tap,
    .mobile-nav-link,
    .mobile-card-button {
      min-height: 48px;
      padding: 0.75rem 1rem;
    }

    /* Better text readability on mobile */
    .mobile-responsive-text {
      font-size: 1.125rem;
      line-height: 1.6;
    }

    /* Improved form spacing on mobile */
    .mobile-form-input {
      padding: 1rem;
      font-size: 16px;
    }

    /* Mobile card spacing adjustments */
    .mobile-card-spacing {
      margin-bottom: 1.5rem;
      padding: 1rem;
    }
  }

  /* iOS specific fixes */
  @supports (-webkit-touch-callout: none) {
    .mobile-touch-target,
    .mobile-enhanced-tap,
    .mobile-form-input,
    .mobile-nav-link {
      -webkit-appearance: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
    }
  }

  /* Android specific optimizations */
  @media screen and (max-width: 768px) and (pointer: coarse) {
    .mobile-touch-target:active,
    .mobile-enhanced-tap:active,
    .mobile-card-button:active {
      background-color: rgba(234, 88, 12, 0.1);
      transform: scale(0.98);
    }
  }

  /* Landscape mobile optimizations */
  @media (max-width: 768px) and (orientation: landscape) {
    .mobile-card-spacing {
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .mobile-responsive-text {
      font-size: 1rem;
      line-height: 1.5;
    }
  }

  /* ==================================================
     VISUAL CONSISTENCY & THEME SYSTEM
     ================================================== */

  /* Consistent button system */
  .theme-consistent-button {
    font-weight: 500;
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    transition: all 200ms ease-out;
    min-height: 48px;
    touch-action: manipulation;
  }

  .theme-consistent-button:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-2 outline-none;
  }

  /* Consistent link system */
  .theme-consistent-link {
    color: #ea580c;
    transition: color 200ms ease-out;
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .theme-consistent-link:hover {
    color: #c2410c;
  }

  .theme-consistent-link:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-1 outline-none rounded-sm;
  }

  /* Consistent form inputs */
  .theme-consistent-input,
  .theme-consistent-select {
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    padding: 0.75rem;
    transition: border-color 200ms ease-out, box-shadow 200ms ease-out;
    min-height: 48px;
    font-size: 16px; /* Prevents zoom on iOS */
  }

  .theme-consistent-input:focus,
  .theme-consistent-select:focus {
    border-color: #fb923c;
    box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.1);
    outline: none;
  }

  /* Consistent badge system */
  .theme-consistent-badge {
    background-color: #fed7aa;
    color: #c2410c;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
  }

  /* Consistent card system */
  .theme-consistent-card {
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid #e5e7eb;
    padding: 1.5rem;
    transition: box-shadow 200ms ease-out, transform 200ms ease-out;
  }

  .theme-consistent-card:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transform: translateY(-1px);
  }

  /* Consistent typography */
  .theme-consistent-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: #111827;
    line-height: 1.5;
  }

  .theme-consistent-text {
    color: #6b7280;
    line-height: 1.6;
  }

  /* Consistent navigation */
  .theme-consistent-nav {
    /* Base navigation styling */
  }

  .theme-consistent-nav-link {
    color: #ea580c;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    transition: all 200ms ease-out;
    display: inline-block;
    min-height: 48px;
    display: flex;
    align-items: center;
  }

  .theme-consistent-nav-link:hover {
    color: #c2410c;
    background-color: #fed7aa;
  }

  .theme-consistent-nav-link:focus-visible {
    @apply ring-2 ring-orange-300 ring-offset-2 outline-none;
  }

  /* Consistent gradient system */
  .theme-consistent-gradient {
    background-image: linear-gradient(to right, #f97316, #ea580c);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 0.5rem;
    transition: all 200ms ease-out;
  }

  .theme-consistent-gradient:hover {
    background-image: linear-gradient(to right, #ea580c, #dc2626);
    transform: translateY(-1px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }

  /* Consistent icon system */
  .theme-consistent-icon {
    color: #f97316;
    transition: color 200ms ease-out;
  }

  .theme-consistent-icon:hover {
    color: #ea580c;
  }

  /* Consistent progress system */
  .theme-consistent-progress {
    background-color: #e5e7eb;
    border-radius: 9999px;
    height: 0.5rem;
    overflow: hidden;
  }

  .theme-consistent-progress .progress-bar {
    background-color: #f97316;
    height: 100%;
    border-radius: 9999px;
    transition: width 300ms ease-out;
  }

  /* Consistent alert system */
  .theme-consistent-alert {
    background-color: #fed7aa;
    border: 1px solid #fdba74;
    color: #9a3412;
    padding: 1rem;
    border-radius: 0.5rem;
    position: relative;
  }

  .theme-consistent-error {
    background-color: #fef2f2;
    border: 1px solid #fecaca;
    color: #dc2626;
    padding: 1rem;
    border-radius: 0.5rem;
  }

  .theme-consistent-success {
    background-color: #f0fdf4;
    border: 1px solid #bbf7d0;
    color: #166534;
    padding: 1rem;
    border-radius: 0.5rem;
  }

  /* Consistent loading states */
  .theme-consistent-loading {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    background-color: #e5e7eb;
    border-radius: 0.5rem;
  }

  .theme-consistent-loading .loading-accent {
    background-color: #fed7aa;
    border-radius: 0.25rem;
    margin-bottom: 0.5rem;
  }

  /* Dark mode support for theme consistency */
  @media (prefers-color-scheme: dark) {
    .theme-consistent-card {
      background-color: #374151;
      border-color: #4b5563;
      color: white;
    }

    .theme-consistent-title {
      color: #f9fafb;
    }

    .theme-consistent-text {
      color: #d1d5db;
    }

    .theme-consistent-input,
    .theme-consistent-select {
      background-color: #374151;
      border-color: #4b5563;
      color: white;
    }

    .theme-consistent-input::placeholder,
    .theme-consistent-select::placeholder {
      color: #9ca3af;
    }
  }

  /* High contrast mode theme adjustments */
  @media (prefers-contrast: high) {
    .theme-consistent-button,
    .theme-consistent-link,
    .theme-consistent-nav-link {
      border: 2px solid currentColor;
    }

    .theme-consistent-badge {
      border: 1px solid currentColor;
    }

    .theme-consistent-card {
      border: 2px solid #4b5563;
    }
  }

  /* Reduced motion theme considerations */
  @media (prefers-reduced-motion: reduce) {
    .theme-consistent-button,
    .theme-consistent-link,
    .theme-consistent-card,
    .theme-consistent-gradient,
    .theme-consistent-nav-link,
    .theme-consistent-icon {
      transition: none;
    }

    .theme-consistent-card:hover {
      transform: none;
    }

    .theme-consistent-gradient:hover {
      transform: none;
    }
  }

  /* Print styles for theme consistency */
  /* Hover lift utility for subtle card interactions */
  .hover-lift {
    @apply hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-purple-500/10 hover:-translate-y-0.5 transition-all duration-200 will-change-transform;
  }

  /* Dark Mode Utility Classes for Consistent Theming */
  
  /* Background utilities with automatic dark mode */
  .bg-surface {
    @apply bg-background dark:bg-background;
  }
  
  .bg-surface-elevated {
    @apply bg-card dark:bg-card;
  }
  
  .bg-surface-overlay {
    @apply bg-popover dark:bg-popover;
  }
  
  /* Text color utilities with dark mode variants */
  .text-primary {
    @apply text-foreground dark:text-foreground;
  }
  
  .text-secondary {
    @apply text-muted-foreground dark:text-muted-foreground;
  }
  
  .text-accent-orange {
    @apply text-orange-600 dark:text-orange-400;
  }
  
  .text-accent-green {
    @apply text-green-600 dark:text-green-400;
  }
  
  /* Border utilities with dark mode */
  .border-surface {
    @apply border-border dark:border-border;
  }
  
  .border-accent {
    @apply border-orange-200 dark:border-orange-800;
  }
  
  /* Interactive element utilities */
  .focus-ring-orange {
    @apply focus:ring-2 focus:ring-orange-600 dark:focus:ring-orange-400 focus:ring-offset-2 focus:outline-none;
  }
  
  .hover-bg-surface {
    @apply hover:bg-muted dark:hover:bg-muted;
  }
  
  .hover-text-orange {
    @apply hover:text-orange-600 dark:hover:text-orange-400;
  }
  
  /* Icon background utilities */
  .icon-bg-orange {
    @apply bg-orange-100 dark:bg-orange-950/30;
  }
  
  .icon-bg-green {
    @apply bg-green-100 dark:bg-green-950/30;
  }
  
  .icon-bg-blue {
    @apply bg-blue-100 dark:bg-blue-950/30;
  }
  
  /* Card shadow utilities for dark mode */
  .card-shadow {
    @apply shadow-sm hover:shadow-md dark:shadow-lg dark:shadow-purple-500/5 dark:hover:shadow-purple-500/10;
  }
  
  /* Loading state utilities */
  .skeleton-bg {
    @apply bg-gray-200 dark:bg-gray-700 animate-pulse;
  }
  
  .placeholder-bg {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400;
  }
  
  /* Form input styling with dark mode */
  .input-field {
    @apply bg-background dark:bg-background border-input dark:border-input text-foreground dark:text-foreground;
    @apply focus:border-orange-600 dark:focus:border-orange-400 focus:ring-orange-600 dark:focus:ring-orange-400;
  }
  
  /* Button variants with consistent dark mode */
  .btn-primary {
    @apply bg-orange-600 hover:bg-orange-700 dark:bg-orange-500 dark:hover:bg-orange-600;
    @apply text-white border-transparent;
  }
  
  .btn-secondary {
    @apply bg-secondary hover:bg-secondary/80 dark:bg-secondary dark:hover:bg-secondary/80;
    @apply text-secondary-foreground dark:text-secondary-foreground border-border dark:border-border;
  }
  
  .btn-outline {
    @apply bg-background hover:bg-muted dark:bg-background dark:hover:bg-muted;
    @apply text-foreground dark:text-foreground border-border dark:border-border;
  }
  
  /* Alert/notification styling */
  .alert-info {
    @apply bg-blue-50 dark:bg-blue-950/30 text-blue-900 dark:text-blue-100 border-blue-200 dark:border-blue-800;
  }
  
  .alert-success {
    @apply bg-green-50 dark:bg-green-950/30 text-green-900 dark:text-green-100 border-green-200 dark:border-green-800;
  }
  
  .alert-warning {
    @apply bg-yellow-50 dark:bg-yellow-950/30 text-yellow-900 dark:text-yellow-100 border-yellow-200 dark:border-yellow-800;
  }
  
  .alert-error {
    @apply bg-red-50 dark:bg-red-950/30 text-red-900 dark:text-red-100 border-red-200 dark:border-red-800;
  }
  
  /* Badge styling with dark mode */
  .badge-default {
    @apply bg-muted text-muted-foreground dark:bg-muted dark:text-muted-foreground;
  }
  
  .badge-orange {
    @apply bg-orange-100 text-orange-800 dark:bg-orange-950/30 dark:text-orange-400;
  }
  
  .badge-green {
    @apply bg-green-100 text-green-800 dark:bg-green-950/30 dark:text-green-400;
  }
  
  /* Navigation styling */
  .nav-link {
    @apply text-foreground hover:text-orange-600 dark:text-foreground dark:hover:text-orange-400;
    @apply transition-colors duration-200;
  }
  
  .nav-link-active {
    @apply text-orange-600 dark:text-orange-400 font-medium;
  }

  @media print {
    .theme-consistent-button,
    .theme-consistent-badge,
    .theme-consistent-alert {
      background: white !important;
      color: black !important;
      border: 1px solid black !important;
    }

    .theme-consistent-link {
      color: black !important;
      text-decoration: underline !important;
    }

    .theme-consistent-card {
      border: 1px solid black !important;
      box-shadow: none !important;
    }
  }
}